From 36af3c3ef329c88a55384cde29e50de297f6672f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@googlemail.com>
Date: Mon, 28 May 2012 01:28:06 +0200
Subject: [PATCH] board-overo.c: call usb_musb_init with host mode as default
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

suggested at [1] as temporary solution

[1] http://gumstix.8.n6.nabble.com/USB-OTG-on-post-v3-0-kernels-td4473952.html

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@googlemail.com>
---
 arch/arm/mach-omap2/board-overo.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/board-overo.c b/arch/arm/mach-omap2/board-overo.c
index f9fdb63..087f320 100644
--- a/arch/arm/mach-omap2/board-overo.c
+++ b/arch/arm/mach-omap2/board-overo.c
@@ -668,9 +668,15 @@ static void __init overo_opp_init(void)
 
 #if defined(CONFIG_USB_MUSB_HDRC) || \
 	defined (CONFIG_USB_MUSB_HDRC_MODULE)
+static struct omap_musb_board_data musb_board_data = {
+       .interface_type         = MUSB_INTERFACE_ULPI,
+       .mode                   = MUSB_HOST,
+       .power                  = 500,
+};
+
 static inline void __init overo_init_musb(void)
 {
-	usb_musb_init(NULL);
+	usb_musb_init(&musb_board_data);
 }
 #else
 static inline void __init overo_init_musb(void) { return; }
-- 
1.7.4.4

